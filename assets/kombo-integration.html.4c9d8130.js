import{_ as t,r as p,o as e,c as o,a as n,b as c,F as l,d as s,e as u}from"./app.9e655b15.js";const i={},r=n("h1",{id:"kibanalytics",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#kibanalytics","aria-hidden":"true"},"#"),s(" Kibanalytics")],-1),k=n("p",null,"Kibanalytics is an open source tool developed by the Virail team that aims to make use of the ELK stack to collect events from web pages and visualize them, offering the same kind of insights that Google Analytics does.",-1),b=s("For more information, check the "),m={href:"https://kibanalytics.io/",target:"_blank",rel:"noopener noreferrer"},d=s("project website"),g=s("."),h=u(`<h2 id="kombo-integration" tabindex="-1"><a class="header-anchor" href="#kombo-integration" aria-hidden="true">#</a> Kombo Integration</h2><p>The goal to integrate KBS with Kombo Checkout Page is to provide real time direct sales data originated from Virail links.</p><h3 id="step-1-load-kbs-script-in-kombo-checkout-page" tabindex="-1"><a class="header-anchor" href="#step-1-load-kbs-script-in-kombo-checkout-page" aria-hidden="true">#</a> Step 1 - Load KBS script in Kombo Checkout Page</h3><p>Use the following code snippet on the header of Kombo Checkout Page to load KBS script.</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Kombo Checkout Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>kbs.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-auto-track</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Kombo Reserve Checkout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>From A to B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Reserve Details:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkoutBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Checkout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="step-2-dispatch-kombo-checkout-custom-event" tabindex="-1"><a class="header-anchor" href="#step-2-dispatch-kombo-checkout-custom-event" aria-hidden="true">#</a> Step 2 - Dispatch &#39;kombo-checkout&#39; custom event</h3><p>After the complete checkout process and payment confirmation originated from Virail links, dispatch a custom event with KBS tracking library:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token comment">/*
        &#39;getVirailId&#39; fn is a fictitious &amp; pseudo code for getting Virail redirection ID.
        This ID will provide the link to related data between Virail &lt;==&gt; Kombo.
        
        &#39;checkout&#39; fn is a fictitious &amp; pseudo code for confirming a reserve, returning an ID when success.
    */</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> kbs <span class="token punctuation">}</span> <span class="token operator">=</span> window<span class="token punctuation">;</span>
    <span class="token keyword">const</span> virail_id <span class="token operator">=</span> <span class="token function">getVirailId</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> checkoutBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;checkoutBtn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    checkoutBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">checkout</span><span class="token punctuation">(</span>reserve<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> reserve_id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
                    virail_id<span class="token punctuation">,</span>
                    reserve_id
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                kbs<span class="token punctuation">.</span><span class="token function">track</span><span class="token punctuation">(</span><span class="token string">&#39;kombo-checkout&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div>`,8);function f(v,_){const a=p("ExternalLinkIcon");return e(),o(l,null,[r,k,n("p",null,[b,n("a",m,[d,c(a)]),g]),h],64)}var w=t(i,[["render",f],["__file","/Users/ibrahimnetto/GitHub/kibanalytics/docs/.vuepress/.temp/pages/kombo-integration.html.vue"]]);export{w as default};
